<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:shiro="http://www.pollix.at/thymeleaf/shiro">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Ë¥¶Âè∑ÁÆ°ÁêÜ</title>
    <meta name="description" content="Ë¥¶Âè∑ÁÆ°ÁêÜ">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <link rel="icon" type="image/png" href="/assets/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="/assets/i/app-icon72x72@2x.png">
    <meta name="apple-mobile-web-app-title" content="Amaze UI" />
    <link rel="stylesheet" href="/assets/css/amazeui.min.css" />
    <link rel="stylesheet" href="/assets/css/admin.css">
    <link rel="stylesheet" href="/assets/css/app.css">
    <script src="/assets/js/echarts.min.js"></script>
    <script src="/js/jquery-1.11.0.min.js"></script>
    <style>
        #sub:hover{
            cursor:pointer;
        }
        #sub{
            display: block;
            width:99%;
            height:80%;
        }
    </style>
</head>

<body data-type="generalComponents" >

    <!--È°∂ÈÉ®-->
    <header class="am-topbar am-topbar-inverse admin-header">
        <div class="am-topbar-brand">
            <a href="javascript:;" class="tpl-logo">
                <img src="/assets/img/shoeslogo.png" alt="">
            </a>
        </div>
        <div class="am-icon-list tpl-header-nav-hover-ico am-fl am-margin-right">

        </div>

        <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#topbar-collapse'}"><span class="am-sr-only">ÂØºËà™ÂàáÊç¢</span> <span class="am-icon-bars"></span></button>

        <div class="am-collapse am-topbar-collapse" id="topbar-collapse" >

            <ul class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list tpl-header-list">
                <li class="am-hide-sm-only"><a href="javascript:;" id="admin-fullscreen" class="tpl-header-list-link"><span class="am-icon-arrows-alt"></span> <span class="admin-fullText">ÂºÄÂêØÂÖ®Â±è</span></a></li>
                <li class="am-dropdown" data-am-dropdown data-am-dropdown-toggle>
                    <a class="am-dropdown-toggle tpl-header-list-link" href="javascript:;">
                        <span class="tpl-header-list-user-nick">
                            <shiro:user>
                                <shiro:principal/>
                            </shiro:user>
                        </span>
                        <span class="tpl-header-list-user-ico"></span>üë®
                    </a>
                    <ul class="am-dropdown-content">
                        <li id="updatePwd"><a href="#"><span class="am-icon-cog"></span> ‰øÆÊîπÂØÜÁ†Å</a></li>
                        <li><a href="/adminController/Exit"><span class="am-icon-power-off"></span> ÈÄÄÂá∫</a></li>
                    </ul>
                </li>
                <li><a href="/adminController/Exit" class="tpl-header-list-link" style="background:#E1E3EA;"><span class="am-icon-sign-out tpl-header-list-ico-out-size"></span></a></li>
            </ul>
        </div>
    </header>

    <div class="tpl-page-container tpl-page-header-fixed">

        <!--Â∑¶‰æßÂàóË°®-->
        <div class="tpl-left-nav tpl-left-nav-hover">
            <div class="tpl-left-nav-list">
                <ul class="tpl-left-nav-menu">

                    <li class="tpl-left-nav-item">
                        <a href="/adminController/SuccessIndex" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-home"></i>
                            <span>È¶ñÈ°µ</span>
                        </a>
                    </li>

                    <li class="tpl-left-nav-item">
                        <a href="javascript:;" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-user"></i>
                            <span>ÁÆ°ÁêÜÂëò</span>
                            <i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right"></i> <!--Êñ∞Ê∂àÊÅØÊèêÁ§∫-->
                        </a>
                        <ul class="tpl-left-nav-sub-menu" style="display: block;">
                            <li>
                                <a href="/adminController/AdminManageIndex" class="active">
                                    <i class="am-icon-angle-right"></i>
                                    <span>Ë¥¶Êà∑ÁÆ°ÁêÜ</span>
                                    <i class="tpl-left-nav-content-ico am-fr am-margin-right"></i>
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li class="tpl-left-nav-item">
                        <a href="javascript:;" class="nav-link tpl-left-nav-link-list">
                            <i class="am-icon-table"></i>
                            <span>ÂÆ¢Êà∑ÁÆ°ÁêÜ</span>
                            <i class="am-icon-angle-right tpl-left-nav-more-ico am-fr am-margin-right"></i>
                        </a>
                        <ul class="tpl-left-nav-sub-menu">
                            <li>
                                <!-- ÊâìÂºÄÁä∂ÊÄÅ a Ê†áÁ≠æÊ∑ªÂä† active Âç≥ÂèØ   -->
                                <a href="/show_customer_info.html" class="active">
                                    <i class="am-icon-angle-right"></i>
                                    <span>ÂÆ¢Êà∑‰ø°ÊÅØ</span>
                                </a>
                                <a href="/show_recharge_record.html">
                                    <i class="am-icon-angle-right"></i>
                                    <span>ÂÖÖÂÄºËÆ∞ÂΩï</span>
                                </a>
                                <a href="/show_expense_record.html">
                                    <i class="am-icon-angle-right"></i>
                                    <span>Ê∂àË¥πËÆ∞ÂΩï</span>
                                </a>
                            </li>
                        </ul>
                    </li>

                </ul>
            </div>
        </div>

        <div class="tpl-content-wrapper">
            <ol class="am-breadcrumb">
                <li><a href="javascript:;" class="am-icon-home">ÁÆ°ÁêÜÂëò</a></li>
                <li><a href="javascript:;">Ë¥¶Êà∑ÁÆ°ÁêÜ</a></li>
                <li class="am-active">ÂÜÖÂÆπ</li>
            </ol>
            <div class="tpl-portlet-components">
                <div class="tpl-block">
                    <div class="am-g">
                        <div class="am-u-sm-12 am-u-md-3">
                            <div class="am-btn-toolbar">
                                <shiro:hasAnyRoles name = "Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò">
                                <div class="am-btn-group am-btn-group-xs">
                                    <button type="button" class="am-btn am-btn-default am-btn-success add"><span class="am-icon-plus"></span> Êñ∞Â¢û</button>
                                </div>
                            </shiro:hasAnyRoles>
                                <shiro:lacksRole name = "Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò">
                                    <div class="am-btn-group am-btn-group-xs">
                                        <button type="button" class="am-btn am-btn-default am-btn-success noadd"><span class="am-icon-plus"></span> Êñ∞Â¢û</button>
                                        <script>
                                            $(".noadd").click(function(){
                                               alert("Êä±Ê≠âÔºå‰Ω†Ê≤°ÊúâÊñ∞Â¢ûÊùÉÈôê");
                                            });
                                        </script>
                                    </div>
                                </shiro:lacksRole>
                            </div>
                        </div>
                        <div class="am-u-sm-12 am-u-md-3">
                            <div class="am-form-group">
                                <select data-am-selected="{btnSize: 'sm'}" id="selectState">
                                </select>
                            </div>
                        </div>
                        <div class="am-u-sm-12 am-u-md-3">
                            <div class="tpl-portlet-input tpl-fz-ml">
                                <div class="portlet-input input-small input-inline">
                                    <div class="input-icon right">
                                        <i class="am-icon-search"></i>
                                        <input type="text" id="search" class="form-control form-control-solid" placeholder="ÊêúÁ¥¢...">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="am-g">
                        <div class="am-u-sm-12">
                            <form class="am-form">
                                <table class="am-table am-table-striped am-table-hover table-main">
                                    <thead>
                                    <tr>
                                        <th class="table-id">ID</th>
                                        <th class="table-title">ÂßìÂêç</th>
                                        <th class="table-type">Ë¥¶Âè∑</th>
                                        <th >ËÅîÁ≥ªÁîµËØù</th>
                                        <th class="table-date am-hide-sm-only">ÊùÉÈôê</th>
                                        <th class="table-date am-hide-sm-only">Áä∂ÊÄÅ</th>
                                        <th class="table-date am-hide-sm-only">‰øÆÊîπ‰∫∫</th>
                                        <th class="table-date am-hide-sm-only">ÂàõÂª∫Êó∂Èó¥</th>
                                        <th class="table-set">Êìç‰Ωú</th>
                                    </tr>
                                    </thead>
                                    <tbody id="content">
                                    <!--<tr>-->
                                        <!--<td><input type="checkbox"></td>-->
                                        <!--<td>1</td>-->
                                        <!--<td><a href="#">Business management</a></td>-->
                                        <!--<td>default</td>-->
                                        <!--<td class="am-hide-sm-only">2014Âπ¥9Êúà4Êó• 7:28:47</td>-->
                                        <!--<td class="am-hide-sm-only">2014Âπ¥9Êúà4Êó• 7:28:47</td>-->
                                        <!--<td class="am-hide-sm-only">2014Âπ¥9Êúà4Êó• 7:28:47</td>-->
                                        <!--<td class="am-hide-sm-only">2014Âπ¥9Êúà4Êó• 7:28:47</td>-->
                                        <!--<td>-->
                                            <!--<div class="am-btn-toolbar">-->
                                                <!--<div class="am-btn-group am-btn-group-xs">-->
                                                    <!--<button class="am-btn am-btn-default am-btn-xs am-text-secondary"><span class="am-icon-pencil-square-o"></span> ÁºñËæë</button>-->
                                                    <!--<button class="am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only"><span class="am-icon-trash-o"></span> Âà†Èô§</button>-->
                                                <!--</div>-->
                                            <!--</div>-->
                                        <!--</td>-->
                                    <!--</tr>-->
                                    </tbody>
                                </table>
                                <div class="am-cf">

                                    <div class="am-fr">
                                        <ul class="am-pagination tpl-pagination" id="paging_toolbar">
                                            <li class="am-disabled" id="prev"><a href="#">¬´</a></li>
                                            <li class="am-active"><a href="#">1</a></li>
                                            <li><a href="#">2</a></li>
                                            <li><a href="#">3</a></li>
                                            <li><a href="#">4</a></li>
                                            <li><a href="#">5</a></li>
                                            <li><a href="#">¬ª</a></li>
                                        </ul>
                                    </div>
                                </div>
                                <hr>

                            </form>
                        </div>

                    </div>
                </div>
                <div class="tpl-alert"></div>
            </div>

        </div>

    </div>

    <!--Âè≥‰∏ãËßíÊèêÁ§∫‰ø°ÊÅØ-->
    <style type="text/css">
        #hint{
            width:30%;
            height:auto;
            position:absolute;
            right:1.3%;
            top:0%;
            padding:0px;
        }
    </style>
    <div id="hint">
        <script>
            <!--Âä®ÊÄÅËÆæÁΩÆÊèêÁ§∫Ê°ÜÁöÑÊú™Áü•-->
            $(function(){
                // $(window).scroll(function(){
                //     var scrollTopHeight=$(document).scrollTop();    //ÊªöÂä®Êù°Ë∑ùÈ°∂ÈÉ®ÁöÑÈ´òÂ∫¶
                //     var documentHeight= document.body.clientHeight; //ÂèØËßÅÊñáÊ°£È´òÂ∫¶
                //         $("#hint").css("top",scrollTopHeight+documentHeight*0.8+"px");
                // }) ;
            });
        </script>
    </div>

    <!--‰øÆÊîπÂØÜÁ†Å-->
    <div class="am-modal am-modal-prompt" tabindex="-1" id="consumption_model">
        <div class="am-modal-dialog">
            <div class="am-modal-bd">
                <form class="am-form am-form-horizontal" id="consumption_form">
                    <fieldset>
                        <legend>‰øÆÊîπÂØÜÁ†Å</legend>
                        <div  class="am-form-group">
                            <label class="am-u-sm-3 am-form-label">ÂéüÂØÜÁ†Å</label>
                            <div class="am-u-sm-9">
                             <input name='oldPwd' type="password" id="oldPwd" placeholder="ËØ∑ËæìÂÖ•">
                             </div>
                           </div>
                       <div class="am-form-group">
                       <label class="am-u-sm-3 am-form-label">Êñ∞ÂØÜÁ†Å</label>
                        <div class="am-u-sm-9">
                        <input name='newPwd' type="password" id="newPwd" placeholder="ËØ∑ËæìÂÖ•6-16‰ΩçÊï∞ÂØÜÁ†ÅÔºàÊï∞Â≠óÂä†Â≠óÊØçÔºâ">
                       </div>
                        </div>
                    </fieldset>
                </form>
            </div>
            <div class="am-modal-footer">
                <span class="am-modal-btn" data-am-modal-cancel>ÂèñÊ∂à</span>
                <span class="am-modal-btn" id="subUpdatePwd" data-am-modal-confirm>Êèê‰∫§</span>
            </div>
        </div>
    </div>


    <script src="/assets/js/jquery.min.js"></script>
    <script src="/assets/js/amazeui.min.js"></script>
    <script src="/assets/js/iscroll.js"></script>
    <script src="/assets/js/app.js"></script>
</body>

</html>
<script type="text/javascript">

    var stateId=""; //Áä∂ÊÄÅid
    var condition=""; //Êù°‰ª∂
    var page=1;
    var rows=3;
    var url="";

    //Ë°®Âçï‰ø°ÊÅØ
    function formInfo(adminId,adminName,adminAuthority,adminPhone){
        var str="<input type='hidden' id='adminId' name='adminId' value='"+adminId+"'><div style='margin-left:8%;' class=\"am-g tpl-amazeui-form\"><div class=\"am-u-sm-12 am-u-md-9\"><form class=\"am-form am-form-horizontal\">\n" +
            "                            <div id='accountDiv' class=\"am-form-group\">\n" +
            "                                <label for=\"user-name\" class=\"am-u-sm-3 am-form-label\">Ë¥¶Âè∑</label>\n" +
            "                                <div class=\"am-u-sm-9\">\n" +
            "                                    <input name='adminName' type=\"text\" id=\"account\" placeholder=\"ËØ∑ËæìÂÖ•4-16‰ΩçÊï∞Ë¥¶Âè∑ÔºàÂ≠óÊØçÔºåÊï∞Â≠óÔºå‰∏ãÂàíÁ∫øÔºåÂáèÂè∑Ôºâ\">\n" +
            "                                </div>\n" +
            "                            </div>" +
            "                            <div id='pwdDiv' class=\"am-form-group\">\n" +
            "                                <label for=\"user-name\" class=\"am-u-sm-3 am-form-label\">ÂØÜÁ†Å</label>\n" +
            "                                <div class=\"am-u-sm-9\">\n" +
            "                                    <input name='adminName' type=\"password\" id=\"password\" placeholder=\"ËØ∑ËæìÂÖ•6-16‰ΩçÊï∞ÂØÜÁ†ÅÔºàÊï∞Â≠óÂä†Â≠óÊØçÔºâ\">\n" +
            "                                </div>\n" +
            "                            </div>" +
            "                            <div class=\"am-form-group\">\n" +
            "                                <label for=\"user-name\" class=\"am-u-sm-3 am-form-label\">ÂßìÂêç</label>\n" +
            "                                <div class=\"am-u-sm-9\">\n" +
            "                                    <input value='"+adminName+"' name='adminName' type=\"text\" id=\"adminName\" placeholder=\"ËØ∑ËæìÂÖ•‰∏≠ÊñáÂêçÁß∞ÊàñËã±ÊñáÂêçÁß∞\">\n" +
            "                                </div>\n" +
            "                            </div>" +
            "                            <div class=\"am-form-group\">\n" +
            "                                <label for=\"user-name\" class=\"am-u-sm-3 am-form-label\">ÊâãÊú∫Âè∑</label>\n" +
            "                                <div class=\"am-u-sm-9\">\n" +
            "                                    <input value='"+adminPhone+"' name='adminPhone' type=\"text\" id=\"adminPhone\" placeholder=\"ËØ∑ËæìÂÖ•Ê≠£Á°ÆÁöÑÊâãÊú∫Âè∑\">\n" +
            "                                </div>\n" +
            "                            </div>" +
            "<div class=\"am-form-group\">\n" +
            "                                <label for=\"user-phone\" class=\"am-u-sm-3 am-form-label\">ÊùÉÈôê<span class=\"tpl-form-line-small-title\"></span></label>\n" +
            "                                <div class=\"am-u-sm-9\">\n" +
            "                                    <select id='adminAuthority' name='adminAuthority' data-am-selected=\"{searchBox: 1}\">\n";
        if(adminAuthority=="Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò"){
            str+="                                        <option value=\"ËØ∑ÈÄâÊã©\">ËØ∑ÈÄâÊã©</option>\n" +
                "                                        <option value=\"Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò\" selected>Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò</option>\n" +
                "                                        <option value=\"ÊôÆÈÄöÁÆ°ÁêÜÂëò\">ÊôÆÈÄöÁÆ°ÁêÜÂëò</option>\n" +
                "                                    </select>\n" +
                "                                </div>\n" +
                "                            </div>" +
                "                        </form></div></div>\n";
        }else if(adminAuthority=="ÊôÆÈÄöÁÆ°ÁêÜÂëò"){
            str+="                                        <option value=\"ËØ∑ÈÄâÊã©\">ËØ∑ÈÄâÊã©</option>\n" +
                "                                        <option value=\"Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò\">Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò</option>\n" +
                "                                        <option value=\"ÊôÆÈÄöÁÆ°ÁêÜÂëò\" selected>ÊôÆÈÄöÁÆ°ÁêÜÂëò</option>\n" +
                "                                    </select>\n" +
                "                                </div>\n" +
                "                            </div>" +
                "                        </form></div></div>\n";
        }else{
            str+="                                        <option value=\"ËØ∑ÈÄâÊã©\">ËØ∑ÈÄâÊã©</option>\n" +
                "                                        <option value=\"Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò\">Ë∂ÖÁ∫ßÁÆ°ÁêÜÂëò</option>\n" +
                "                                        <option value=\"ÊôÆÈÄöÁÆ°ÁêÜÂëò\">ÊôÆÈÄöÁÆ°ÁêÜÂëò</option>\n" +
                "                                    </select>\n" +
                "                                </div>\n" +
                "                            </div>" +
                "                        </form></div></div>\n";
        }
        return str;
    }


    /**
     * ÊèêÁ§∫‰ø°ÊÅØ
     * */
    function prompt(str){
        $('.am-alert').alert('close');
        $("#hint").append("<div class=\"am-alert\" data-am-alert>\n" +
            "            <button type=\"button\" class=\"am-close\">&times;</button>\n" +
            "            <p>"+str+"</p>\n" +
        "        </div>");
        $('.am-alert').alert();
    }

    $(function(){

        /**
         * ÂÖ∑ÊúâÁ°ÆËÆ§ÊåâÈíÆÁöÑÊèêÁ§∫Ê°Ü
         * @param state Áä∂ÊÄÅ
         * @param message ‰ø°ÊÅØ
         */
        function show_alert(state,message)
        {
            $("#my_alert").remove();
            $("body").append("<div class='am-modal am-modal-alert' tabindex='-1' id='my_alert'><div style='width:650px;'  class='am-modal-dialog'><div class='am-modal-hd'>"+state+"</div><div class='am-modal-bd'>"+message+"</div><div class=\"am-modal-footer\">\n" +
                "            <span class=\"am-modal-btn\" id='cancel'>ÂèñÊ∂à</span>\n" +
                "            <span id='sub'>Êèê‰∫§</span>\n" +
                "        </div></div></div>");
            $('#my_alert').modal();
            $("#sub").click(function(){
                var username = /^[\u4E00-\u9FA5A-Za-z]+$/; //ÂßìÂêçÔºö‰∏≠ÊñáÂíåËã±Êñá
                var adminAuthority=$("#adminAuthority").val();
                var adminName=$("#adminName").val();
                if(url=="/adminController/add"){ //Ê∑ªÂä†
                    var account=$("#account").val();
                    var pwd=$("#password").val();
                    //Ê≠£ÂàôË°®ËææÂºè
                    var uPattern = /^[a-zA-Z0-9_-]{4,16}$/; //Ë¥¶Âè∑ÔºöÂ≠óÊØçÔºåÊï∞Â≠óÔºå‰∏ãÂàíÁ∫øÔºåÂáèÂè∑
                    var pPattern=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/; //ÂØÜÁ†ÅÔºö6-16‰ΩçÂ≠óÊØçÂä†Êï∞Â≠ó
                    //Âà§Êñ≠Ë¥¶Êà∑ÊòØÂê¶Â≠òÂú®
                    var rs=false;
                    $.ajax({
                        url:"/adminController/checkAccount",
                        type:'post',
                        async:false,
                        data:{
                            account:account,
                        },
                        dataType:'text',
                        success:function(data) {
                            if(data=="true"){
                                rs=true;
                            }
                        }
                    });
                    if(rs){
                        alert("Ë¥¶Âè∑Â∑≤Â≠òÂú®ÔºåËØ∑Êõ¥ÊîπÔºÅ");
                        return false;
                    }else if(!uPattern.test(account)){
                        alert("ËØ∑ËæìÂÖ•4-16‰ΩçÊï∞Ë¥¶Âè∑ÔºàÂ≠óÊØçÔºåÊï∞Â≠óÔºå‰∏ãÂàíÁ∫øÔºåÂáèÂè∑ÔºâÔºÅ");
                        return false;
                    }else if(!pPattern.test(pwd)){
                        alert("ËØ∑ËæìÂÖ•6-16‰ΩçÊï∞ÂØÜÁ†ÅÔºàÊï∞Â≠óÂä†Â≠óÊØçÔºâÔºÅ");
                        return false;
                    }else if(!username.test(adminName)){
                        alert("ËØ∑ËæìÂÖ•Ëã±ÊñáÂêçÁß∞Êàñ‰∏≠ÊñáÔºÅ");
                        return false;
                    }else if(!(/^1[34578]\d{9}$/.test(adminPhone))){
                        alert("ÊâãÊú∫Âè∑Á†ÅÊúâËØØÔºåËØ∑ÈáçÂ°´");
                        return false;
                    } else if(adminAuthority=="ËØ∑ÈÄâÊã©"){
                        alert("ËØ∑ÈÄâÊã©ÁÆ°ÁêÜÂëòÊùÉÈôê");
                        return false;
                    }
                    $.ajax({
                        url:url,
                        type:'post',
                        async:false,
                        data:{
                            adminName:adminName,
                            adminAuthority:adminAuthority,
                            adminAccount:account,
                            adminPassword:pwd,
                            adminPhone:adminPhone
                        },
                        dataType:'text',
                        success:function(data){
                            var rs="Ë¥¶Êà∑ Ê∑ªÂä†ÊàêÂäü";
                            if(data>0){
                                loadData(page,rows,stateId,condition);
                            }else{
                                rs="Ë¥¶Êà∑ Ê∑ªÂä†Â§±Ë¥•";
                            }
                            //ÊèêÁ§∫Ê°ÜËøΩÂä†‰ø°ÊÅØÔºåÂπ∂ÊòæÁ§∫
                            prompt(rs);
                            //ÂÖ≥Èó≠Ë°®Âçï
                            $('#my_alert').css("display","none");
                            $(".am-dimmer").css("display","none");
                        }
                    });
                } else if(url=="/adminController/update"){ //‰øÆÊîπ
                    var adminId=$("#adminId").val();
                    if(!username.test(adminName)){
                        alert("ËØ∑ËæìÂÖ•‰∏≠ÊñáÂêçÊàñËã±ÊñáÂêçÔºÅ");
                        return false;
                    }else if(!(/^1[34578]\d{9}$/.test(adminPhone))){
                        alert("ÊâãÊú∫Âè∑Á†ÅÊúâËØØÔºåËØ∑ÈáçÂ°´");
                        return false;
                    } else if(adminAuthority=="ËØ∑ÈÄâÊã©"){
                        alert("ËØ∑ÈÄâÊã©ÁÆ°ÁêÜÂëòÊùÉÈôê");
                        return false;
                    }
                    $.ajax({
                        url:url,
                        type:'post',
                        async:false,
                        data:{
                            adminId:adminId,
                            adminName:adminName,
                            adminAuthority:adminAuthority,
                            adminPhone:adminPhone
                        },
                        dataType:'text',
                        success:function(data){
                            var rs="Ë¥¶Êà∑ ‰øÆÊîπÊàêÂäü";
                            if(data>0){
                                loadData(page,rows,stateId,condition);
                            }else{
                                rs="Ë¥¶Êà∑ ‰øÆÊîπÂ§±Ë¥•";
                            }
                            //ÊèêÁ§∫Ê°ÜËøΩÂä†‰ø°ÊÅØÔºåÂπ∂ÊòæÁ§∫
                            prompt(rs);
                            //ÂÖ≥Èó≠Ë°®Âçï
                            $('#my_alert').css("display","none");
                            $(".am-dimmer").css("display","none");
                        }
                    });
                }
                return false;
            });
            $("#cancel").click(function(){
                //ÂÖ≥Èó≠Ë°®Âçï
                $('#my_alert').css("display","none");
                $(".am-dimmer").css("display","none");
            });
        }

        //ÂàùÂßãÂåñÈ°µÈù¢
        loadData(page,rows,stateId,condition);

        /**
         * Âä®ÊÄÅÂ§öÊù°‰ª∂ÂàÜÈ°µÊü•ËØ¢
         * @param page ÂΩìÂâçÈ°µ
         * @param rows ÊØèÈ°µÊòæÁ§∫ÁöÑÊï∞Èáè
         * @param stateId Áä∂ÊÄÅId
         * @param condition ÂÖ±ÂêåÊù°‰ª∂
         */
        function loadData(page,rows,stateId,condition){
            $.ajax({
               url:'/adminController/PageQuery',
               type:'post',
               asyncs:false,
               data:{
                   page:page,
                   rows:rows,
                   stateId:stateId,
                   condition:condition
                },
                dataType:'json',
                success:function(data){
                   var total=data.total;
                   var lists=data.rows;
                   $("#content").empty();
                   for(var i=0;i<lists.length;i++) {
                      var str=("<tr>\n" +
                           "                                        <td class=\"am-hide-sm-only\">" + lists[i].adminId.substr(0, 8) + "...  </td>\n" +
                           "                                        <td>" + lists[i].adminName + "</td>\n" +
                           "                                        <td>" + lists[i].adminAccount + "</td>\n" +
                          "                                        <td>" + lists[i].adminPhone + "</td>\n" +
                          "                                        <td class=\"am-hide-sm-only\">" + lists[i].adminAuthority + "</td>\n" +
                           "                                        <td class=\"am-hide-sm-only\">" + lists[i].stateName + "</td>\n" +
                           "                                        <td class=\"am-hide-sm-only\">" + lists[i].admin2Name + "</td>\n" +
                           "                                        <td class=\"am-hide-sm-only\">" + lists[i].updateDate + "</td>\n" +
                           "                                        <td>\n" +
                           "                                            <div class=\"am-btn-toolbar\">\n" +
                           "                                                <div class=\"am-btn-group am-btn-group-xs\">\n" +
                           "                                                    <input type='hidden' class='adminId' value='" + lists[i].adminId + "'/>" +
                           "                                                    <button class=\"am-btn am-btn-default am-btn-xs am-text-secondary edit\"><span class=\"am-icon-pencil-square-o\"></span> ÁºñËæë</button>");
                       if(lists[i].stateName=="Á¶ÅÁî®"){
                          str+=("<input type=\"hidden\" value=\"66e75647-2b10-4553-a43d-2bb30fa33af7\"><button class=\"am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only del\"><span class=\"am-icon-trash-o\"></span> ÊÅ¢Â§ç</button>" +
                               "                                                </div>\n" +
                               "                                            </div>\n" +
                               "                                        </td>\n" +
                               "                                    </tr>");
                       }else{
                           str+=("<input type='hidden' value='0df82e1d-c318-423f-b506-ef0ca2e628fe'><button class=\"am-btn am-btn-default am-btn-xs am-text-danger am-hide-sm-only del\"><span class=\"am-icon-trash-o\"></span> Á¶ÅÁî®</button>" +
                               "                                                </div>\n" +
                               "                                            </div>\n" +
                               "                                        </td>\n" +
                               "                                    </tr>");
                       }
                       $("#content").append(str);
                   }
                       /**
                        * ÁºñËæëÁÇπÂáª‰∫ã‰ª∂
                        */
                       $(".edit").click(function(){
                           var adminId=$(this).prev().val();
                           var adminName=$(this).parent().parent().parent().prev().prev().prev().prev().prev().prev().prev().text();
                           var adminAuthority=$(this).parent().parent().parent().prev().prev().prev().prev().text();
                           var adminPhone=$(this).parent().parent().parent().prev().prev().prev().prev().prev().text();
                           show_alert("ÁºñËæëÁÆ°ÁêÜÂëò‰ø°ÊÅØ",formInfo(adminId,adminName,adminAuthority,adminPhone));
                           $("#accountDiv").css("display","none");
                           $("#pwdDiv").css("display","none");
                           url="/adminController/update";
                           return false;
                       });


                        $(".add").click(function(){
                            show_alert("ÁºñËæëÁÆ°ÁêÜÂëò‰ø°ÊÅØ",formInfo("","","",""));
                            $("#accountDiv").css("display","block");
                            $("#pwdDiv").css("display","block");
                            url="/adminController/add";
                        });

                       /**
                        * Á¶ÅÁî®ÂíåÊÅ¢Â§çÁÇπÂáª‰∫ã‰ª∂
                        */
                       $(".del").click(function(){
                           var adminId=$(this).parent().children("input").val();
                           var type=$(this).text();
                           $.ajax({
                               url:'/adminController/ByAdminIdUpdateState',
                               type:'post',
                               async:false,
                               data:{
                                   stateId:$(this).prev().val(), //Á¶ÅÁî®ÂØπÂ∫îÁöÑid
                                   adminId:adminId
                               },
                               dataType:'text',
                               success:function(data){
                                   var rs="ÊàêÂäü";
                                    if(data>0){
                                        loadData(page,rows,stateId,condition);
                                    }else{
                                        rs="Â§±Ë¥•";
                                    }
                                   //ÊèêÁ§∫Ê°ÜËøΩÂä†‰ø°ÊÅØÔºåÂπ∂ÊòæÁ§∫
                                   prompt("Ë¥¶Êà∑"+type+rs);
                               }
                           });
                           return false;
                       });

                       /**
                        * ÂàùÂßãÂåñÂàÜÈ°µÊ†è
                        */
                       $("#paging_toolbar").empty();
                       $("#paging_toolbar").append("<li id=\"prev\"><a href=\"javascript:;\">¬´</a></li>");
                       for(var i=1;i<=total;i++){
                           if(page!=i){
                               $("#paging_toolbar").append("<li class='page'><a href=\"javascript:;\">"+i+"</a></li>");
                           }else{
                               $("#paging_toolbar").append("<li class=\"am-active page\"><a href=\"javascript:;\">"+i+"</a></li>");
                           }
                       }
                       $("#paging_toolbar").append("<li id='next'><a href=\"javascript:;\">¬ª</a></li>");

                       /**
                        * ‰∏ä‰∏ÄÈ°µÁÇπÂáª‰∫ã‰ª∂
                        */
                       $("#prev").click(function(){
                           page=page-1;
                           if(page<1){
                               page=total;
                           }
                          loadData(page,rows,stateId,condition);
                       });

                       /**
                        * ‰∏ã‰∏ÄÈ°µÁÇπÂáª‰∫ã‰ª∂
                        */
                       $("#next").click(function(){
                           page=page+1;
                           if(page>total){
                               page=1;
                           }
                           loadData(page,rows,stateId,condition);
                       });

                       /**
                        * È°µÊï∞ÁÇπÂáª‰∫ã‰ª∂
                        */
                       $(".page").click(function(){
                           page=$(this).children("a").text();
                           loadData(page,rows,stateId,condition);
                       });

                }
            });
        }

        /**
         * ÊêúÁ¥¢Ê°ÜËæìÂÖ•‰∫ã‰ª∂ÔºöÊ†πÊçÆÁÆ°ÁêÜÂëòÂêçÁß∞ÂíåÂßìÂêçÊü•ËØ¢
         * */
        $("#search").keyup(function(){
           condition=$("#search").val();
           loadData(1,rows,stateId,condition);
        });

        /**
         * ÂàùÂßãÂåñ‰∏ãÊãâÊ°Ü
         */
        $.ajax({
           url:'/stateController/queryAll',
           type:'post',
           dataType:'json',
           asyncs:false,
           success:function(data){
               $("#selectState").empty();
               $("#selectState").append("<option class='op' value='0'>ËØ∑ÈÄâÊã©Áä∂ÊÄÅ</option>");
               for(var i=0;i<data.length;i++){
                   $("#selectState").append("<option class='op' value='"+data[i].stateId+"'>"+data[i].stateName+"</option>\n");
               }
           }
        });


        /**
         * ‰∏ãÊãâÊ°ÜÈÄâÊã©‰∫ã‰ª∂ÔºöÊ†πÊçÆÁä∂ÊÄÅÊü•ËØ¢
         */
        $("#selectState").change(function () {
            stateId=$(this).val();
            if(stateId==0){
                stateId="";
            }
            loadData(1,rows,stateId,condition);
        });

        /**
         *  Ê∏ÖÁ©∫‰øÆÊîπÂØÜÁ†ÅformË°®ÂçïÔºåÂπ∂ÂÖ≥Èó≠dialog
         * */
        function clearFormCloseDialog(){
            //Ê∏ÖÁ©∫Ë°®Âçï
            $("#oldPwd").val("");
            $("#newPwd").val("");
            //ÂÖ≥Èó≠dialog
            $("#consumption_model").modal('close');
        }


        /**
         * ‰øÆÊîπÂØÜÁ†ÅÁÇπÂáª‰∫ã‰ª∂
         */
        $("#updatePwd").click(function(){
            $('#consumption_model').modal({
                relatedTarget: this,
               onCancel: function(e) {
                   clearFormCloseDialog();
                }
            });
        });

        /**
         * ‰øÆÊîπÂØÜÁ†Å
         */
        $("#subUpdatePwd").click(function(){
            var pPattern=/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{6,16}$/; //ÂØÜÁ†ÅÔºö6-16‰ΩçÂ≠óÊØçÂä†Êï∞Â≠ó
            var oldPwd=$("#oldPwd").val();
            var newPwd=$("#newPwd").val();
            if(oldPwd==""){
                alert("ËØ∑ËæìÂÖ•ÂéüÂØÜÁ†Å");
                return false;
            }else if(!pPattern.test(newPwd)){
                alert("Êñ∞ÂØÜÁ†ÅËØ∑ËæìÂÖ•6-16‰ΩçÂ≠óÊØçÂä†Êï∞Â≠ó");
                return false;
            }
            $.ajax({
               url:'/adminController/updateAdminPassword',
               type:'post',
               data:{
                   oldPwd:oldPwd,
                   newPwd:newPwd
               },
               dataType:'text',
               success:function(data){
                    alert(data);
                    if(data=="‰øÆÊîπÊàêÂäüÔºåËØ∑ÈáçÊñ∞ÁôªÈôÜ"){
                        window.location.href="/adminController/Exit";
                    }
               }
            });
           return false;
        });

    });
</script>